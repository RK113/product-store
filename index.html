<!DOCTYPE html>
<html>
<head>
<title>NENI PATOLA CREATION</title>
<meta http-equiv="content-type" content="text/html;charset=UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta charset="UTF-8">
<!-- Open Graph meta tags -->
<meta property="og:title" content="Neni Patola Creation" />
<meta property="og:description" content="Explore beautifully crafted Patola sarees and traditional items at Neni Patola Creation." />
<meta property="og:image" content="fl.png" />
<meta property="og:type" content="website" />
<meta property="og:site_name" content="Neni Patola Creation" />

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
* { box-sizing: border-box; padding: 0; margin: 0; }
body {
 font-family: 'Segoe UI', sans-serif;
 margin: 0;
 padding: 10px;
 background-color: #f7f7f7;
}
header {
 background: linear-gradient(to left, white, #e1e1e1);  /* dark red/black */;
 color: black;
 border-radius: 10px;
 display: flex;
 justify-content: space-between;
 align-items: center;
 box-shadow: 0 4px 8px rgba(0,0,0,0.15);
 padding: 10px 15px;
}

.header-left {
  display: flex;
  text-align: center;
  align-items: center;
  justify-content: center;
  margin-top: 3%;
}

.header-left img {
  width: 25%;
  height: 25%;
  float: left;
  vertical-align: top; 
  object-fit: cover;
  margin-top: -3%;
}

#heading {
  font-weight: bold;
  margin: 0;
  padding: 0;
  line-height: 1;
  cursor: pointer;
}


.cart-count {
background: #e74c3c;
color: white;
padding: 6px 14px;
border-radius: 20px;
font-weight: bold;
cursor: pointer;
float: right;
margin-top: 10px;
box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
transition: background 0.3s ease;
}

.cart-count:hover {
background: #c0392b;
}

.menu-container { position: relative; }
.menu-btn {
background: #ffffff;
color: #16a085;
padding: 10px 15px;
border: 2px solid #16a085;
font-weight: bold;
border-radius: 8px;
cursor: pointer;
transition: all 0.3s ease;
}
.menu-btn:hover {
background: #16a085;
color: white;
}

.menu div:hover {
background-color: #ecfdfd;
color: #16a085;
font-weight: bold;
}

.menu {
 display: none;
 font-size: 16px;
 position: absolute;
 top: 45px;
 right: 0;
 background: white;
 color: black;
 box-shadow: 0 4px 8px rgba(0,0,0,0.2);
 border-radius: 5px;
 overflow: hidden;
 z-index: 1;
 transition: all 0.3s ease;
}
.menu div {
 width: 150px;
 padding: 10px;
 cursor: pointer;
 border-bottom: 1px solid #eee;
}

footer {
 width: 100%;
 height: auto;
 background: linear-gradient(to bottom right, #e2e3e2, #eeeeee);
 border-radius: 10px;
 padding: 20px;
 margin-top: 40px;
 box-shadow: 0 4px 6px rgba(0,0,0,0.1);
 font-size: 14px;
 text-align: center;
 color: #555;
}
footer h4 {
 margin-bottom: 10px;
 color: black;
}
footer p {
 margin-bottom: 8px;
}
.controls {
margin: 20px 0;
display: flex;
gap: 10px;
flex-wrap: wrap;
align-items: center;
}

.controls input[type="text"] {
flex: 1;
min-width: 180px;
padding: 10px 14px;
border: 2px solid #ccc;
border-radius: 8px;
font-size: 16px;
transition: border 0.3s ease;
}

.controls input[type="text"]:focus {
border-color: #3498db;
outline: none;
background-color: #f0faff;
}

input[type="number"]{
  width: auto;
  height: auto;
  padding: 5px;
  text-align: center;
  font-size: 20px;
  border: 1px solid #ccc;
  border-radius: 6px; 
  outline: none;
}

.controls label {
font-size: 16px;
color: #2c3e50;
font-weight: bold;
margin-right: 5px;
}

.controls select {
padding: 10px 14px;
font-size: 16px;
border: 2px solid #ccc;
border-radius: 8px;
background-color: white;
transition: border 0.3s ease;
}

.controls select:focus {
border-color: #3498db;
outline: none;
background-color: #f0faff;
}
 .product {
 width: 42%;
 height: auto;
 background: #fff;
 border-radius: 10px;
 box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
 padding: 7px;
 margin-left: 10px;
 text-align: center;
 display: flex;
 flex-direction: column;
 align-items: center;
 transition: transform 0.2s;
 cursor: pointer;
 }
 .product:hover { transform: scale(1.03); }
 .product img {
 width: 100%;
 height: auto;
 object-fit: cover;
 border-radius: 8px;
 margin-bottom: 6px;
 }
 .product h3 {
   font-size: 14px;
   font-weight: 500;
   margin: 4px 0 2px;
   text-align: center;
 }
 .product p { font-size: 14px; margin: 0; color: #555; }

 .remove-btn {
 background: #e74c3c;
 }
 .remove-btn:hover {
 background: #c0392b;
 }
 .total-price {
 font-weight: bold;
 font-size: 18px;
 margin-top: 10px;
 }
 .section-title {
 margin: 20px 0 10px;
 font-size: 20px;
 font-weight: bold;
 }
 #fruit-list, #vegetable-list {
 display: flex;
 flex-wrap: wrap;
 gap: 15px;
 }
 
.product-detail {
background: #ffffff;
border-radius: 16px;
box-shadow: 0 4px 12px rgba(0,0,0,0.1);
padding: 20px;
max-width: 600px;
margin: 20px auto;
text-align: left;
animation: fadeIn 0.3s ease-in-out;
}

.pr{
  color: black!important;
  font-size: large!important;
  font-weight: 900;
}

.product-detail img {
max-width: 100%;
border-radius: 12px;
margin-bottom: 16px;
}

.product-detail h3 {
font-size: 24px;
color: #2c3e50;
margin-bottom: 10px;
}

.product-detail p {
font-size: 16px;
color: black;
margin: 6px 0;
}

.product-detail .buttons {
margin-top: 20px;
display: flex;
flex-wrap: wrap;
justify-content: center;
gap: 13px;
}

.product-detail button {
padding: 10px 16px;
font-size: 14px;
font-weight: 600;
border: none;
border-radius: 8px;
cursor: pointer;
background: linear-gradient(to bottom right, #2b2b2b, #000000);
box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.1),
0 4px 10px rgba(0, 0, 0, 0.3);
transition: all 0.3s ease;
color: white;
}

.product-detail button:hover {
 background: linear-gradient(to bottom right, #444, #000);
 box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2),
  0 6px 14px rgba(0, 0, 0, 0.5);
 transform: translateY(-2px);
}

@keyframes fadeIn {
from { opacity: 0; transform: translateY(20px); }
to { opacity: 1; transform: translateY(0); }
}

@keyframes blink {
0%, 100% { opacity: 1; }
50% { opacity: 0.3; }
}

.blinking {
animation: blink .7s infinite;
}

#fl{
width: 100px;
height: 100px;
object-fit: cover;
border-radius: 4px;
margin-bottom: 6px;
margin-right: 10px;
float: left;
}

.image-gallery-wrapper {
position: relative;
width: 100%;
max-width: 400px;
margin: auto;
}

.image-gallery {
  position: relative;
  overflow: hidden;
  width: 100%;
}

.image-gallery-inner {
  display: flex;
  transition: transform 0.3s ease;
  width: 100%;
}

.image-gallery-inner > div {
  min-width: 100%;
  box-sizing: border-box;
  position: relative;
}

.image-gallery-inner img {
  width: 100%;
  height: auto;
  display: block;
  border-radius: 12px;
}

/* Navigation arrows */
.gallery-arrow {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  font-size: 30px;
  background: rgba(0,0,0,0.5);
  color: white;
  border: none;
  padding: 5px 12px;
  cursor: pointer;
  z-index: 5;
}

.arrow-left {
  left: 10px;
}

.arrow-right {
  right: 10px;
}

/* Dots below gallery */
.gallery-dots {
  display: flex;
  justify-content: center;
  margin-top: 10px;
}

.gallery-dots span {
  height: 10px;
  width: 10px;
  margin: 0 4px;
  background-color: #ccc;
  border-radius: 50%;
  display: inline-block;
  cursor: pointer;
}

.gallery-dots span.active {
  background-color: black;
}

/* Stamp overlay (fix size) */
.overlay-stamp {
  position: absolute;
  top: 8px;
  right: 8px;
  width: 60px;
  height: 60px;
  object-fit: contain;
  pointer-events: none;
  opacity: 0.8;
  z-index: 2;
}

.footer-toggle {
display: flex;
justify-content: space-between;
align-items: center;
cursor: pointer;
background: #f9f9f9;
padding: 10px;
margin-top: 20px;
border-radius: 8px;
}

.footer-toggle:hover {
background: white;
}

.footer-toggle h4 {
margin: 0;
font-size: 18px;
}

.arrow-icon {
font-size: 20px;
transition: transform 0.3s ease;
}

.footer-section.open .arrow-icon {
transform: rotate(180deg);
}

.footer-list {
padding-left: 10px;
margin-top: 10px;
}
.footer-list p a {
color: #444;
text-decoration: none;
}
.footer-list p a:hover {
text-decoration: underline;
color: darkred;
}

#zoom-gallery-dots span {
 display: inline-block;
 width: 10px;
 height: 10px;
 background: #bbb;
 margin: 0 5px;
 border-radius: 50%;
 cursor: pointer;
}

#zoom-gallery-dots .active {
 background: white;
}

#zoom-gallery-image {
 max-width: 95%;
 max-height: 90%;
 object-fit: contain;
 transition: transform 0.3s ease;
 touch-action: none;
 /* Important for pinch gesture */
}

#overlay-container{
  position: absolute;
  display: flex;
align-items: center;
justify-content: center;
  bottom: 5%;
  right: 5%;
  width: 50px;
  height: 50px;
  background: white;
  border-radius: 50%;
  box-sizing: border-box;
  z-index: 2;
}

.overlay-stamp {
  position: absolute;
  width: 70%!important;
  height: auto;
  cursor: pointer;
  opacity: 0.8;
  transition: transform 0.3s; 
}
.overlay-stamp:hover {
  transform: scale(1.1);
  opacity: 1;
}
.icon-bar {
  display: flex;
  justify-content: space-between;
  margin-top: 8px;
}

.icon-btn {
  font-size: 18px;
  padding: 6px;
  border: none;
  background: #f0f0f0!important;
  box-shadow: none!important;
  border-radius: 6px;
  cursor: pointer;
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.icon-btn:hover {
  background: #ccc;
}

#quick-view-popup {
  display: none;
  position: fixed;
  top: 50%;
  left: 50%;
  width: 100%;
  height: 100vh;
padding-top: 20px;
padding-bottom: 200px;
  overflow-y: scroll;
  transform: translate(-50%, -50%);
  background-color: rgba(0, 0, 0, 0.6);
  padding: 20px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.3);
  z-index: 10000;
}

#quick-view-popup button {
  padding: 10px 16px;
  margin-bottom: 2%;
  font-size: 12px;
  font-weight: 600;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  background: linear-gradient(to bottom right, #2b2b2b, #000000);
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.1),
    0 4px 10px rgba(0, 0, 0, 0.3);
  transition: all 0.3s ease;
  color: white;
}

#quick-view-popup button:hover {
  background: linear-gradient(to bottom right, #444, #000);
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2),
    0 6px 14px rgba(0, 0, 0, 0.5);
  transform: translateY(-2px);
}

#quick-view-content{
  position: relative;
  background: whitesmoke;
padding: 10px;
border-radius: 12px;
width: 100%;
height: auto;
justify-content: center;
align-items: center;
box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
transform: translateY(0);
}

#quick-view-popup img {
  width: 100%;
  height: auto;
  border-radius: 10px;
}

.fas, .far{
  color: #333333;
}

#load-more-all, .remove-btn,#ctn {
  padding: 8px 12px;
  margin: 10px 0;
  cursor: pointer;
  font-weight: bold;
  border: none;
  border-radius: 5px;
  color: white;
}

#load-more-all,#ctn{
  background-color: #3498db;
}

.spinner-btn {
  pointer-events: none;
  opacity: 0.6;
  position: relative;
  color: transparent !important;
}

.spinner-btn::after {
  content: "";
  position: absolute;
  top: 50%;
  left: 50%;
  width: 18px;
  height: 18px;
  margin: -9px 0 0 -9px;
  border: 3px solid #fff;
  border-top: 3px solid #333;
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

#goTopBtn {
  display: none;
  position: fixed;
  bottom: 50px;
  right: 20px;
  z-index: 999;
  font-size: 30px;
  padding: 10px 15px;
  border: none;
  border-radius: 50%;
  background-color: black;
  color: white;
  cursor: pointer;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
  transition: opacity 0.3s ease;
}

#goTopBtn:hover {
  background-color: #444;
}
</style>
</head>
<body>
  <button id="goTopBtn" onclick="scrollToTop()" title="Go to top"><i class="fa-solid fa-arrow-up"></i></button>

<div id="loading-screen" style="
position: fixed;
top: 0; left: 0;
width: 100%; height: 100%;
background: white;
z-index: 9999;
display: flex;
align-items: center;
justify-content: center;
transition: opacity 0.3s ease;
">
<img src="a.png" class="blinking" alt="Loading..." style="width: 100px; height: 100px;" />
</div>


<header>
 <div class="header-left">
<h2 onclick="showProductList(true)" id="heading">Ô∏è<img src="nl.png" alt="neni patola creation"/>NENI PATOLA <br /> CREATION</h2></div>
<div class="menu-container">
 <button class="menu-btn" onclick="toggleMenu()">‚ò∞ </button>
 <div class="menu" id="menu">
<div onclick="closeMenu(); showProductList(true)">Home</div>
<div onclick="closeMenu(); showCart()">View Cart</div>
<div onclick="closeMenu(); showFavorites()">Favorites</div>
<div onclick="closeMenu(); alert('This is a demo store. Created by Vishvarajsinh.')">About</div>

 </div>
</div>
</header>

<div id="main-controls">
<div class="cart-count" id="cart-count" onclick="showCart()">Cart (0)</div>
<div class="controls">
 <input type="text" id="searchInput" placeholder="Search products..." /><br />
<button onclick="toggleFilterPopup()" style="padding: 10px 16px; border: none; border-radius: 6px; background: black; color: white; font-weight: bold;">Filter</button>

<div id="filter-popup" style="display:none; position: fixed; top: 20%; left: 50%; transform: translateX(-50%); background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.2); z-index: 10; max-width: 300px;">
<h3 style="margin-bottom: 10px;">Filter Options</h3>

<strong>Sort by Price:</strong><br>
<label><input type="radio" name="sort" value="low"> Low to High</label><br>
<label><input type="radio" name="sort" value="high"> High to Low</label><br><br>

<strong>Product Type:</strong><br>
<label><input type="checkbox" value="fruit" class="type-filter"> Saree</label><br>
<label><input type="checkbox" value="vegetable" class="type-filter"> Dupatta</label><br><br>

<button onclick="applyFilter()" style="padding: 8px 12px; background: #3498db; color: white; border: none; border-radius: 6px;">Apply</button>
<button onclick="toggleFilterPopup()" style="padding: 8px 12px; background: #ccc; margin-left: 10px; border: none; border-radius: 6px;">Close</button>
</div>
</div>
</div>
  <div id="breadcrumb" style="margin: 15px 0; font-size: larger; color: #666;"></div>

<div id="product-list">
<div id="all-products" style="display: flex; flex-wrap: wrap; gap: 15px;"></div><br />
<button id="load-more-all" onclick="loadMore()">Load More</button>
</div>


<div id="product-detail"></div>
<div id="cart-view" style="display:none;"></div>

<footer>
<div style="max-width: 1000px; margin: auto; padding: 20px;">

 <!-- About -->
 <div>
 <img id="fl" src="fl.png" alt="Nani Patola Creation">
 <h4>About This Store</h4>
 <p>This is a demo product store where you can browse and view items like fruits, vegetables, sarees, and more.</p>
 </div>

 <!-- COLLECTION -->
 <div class="footer-section">
 <div class="footer-toggle" onclick="toggleFooterList('collection-list', this)">
 <h4>Collection</h4>
 <i class="fas fa-chevron-down arrow-icon"></i>
 </div>
 <div id="collection-list" class="footer-list" style="display: none;">
 <p><a href="#" onclick="filterByFooter('saree')">Single Ikat Saree</a></p>
 <p><a href="#" onclick="filterByFooter('kurta')">Kurta</a></p>
 <p><a href="#" onclick="filterByFooter('dupatta')">Dupatta</a></p>
 <p><a href="#" onclick="filterByFooter('fruit')">Fruits</a></p>
 <p><a href="#" onclick="filterByFooter('vegetable')">Vegetables</a></p>
 </div>
 </div>

 <!-- CONNECT -->
 <div class="footer-section">
 <div class="footer-toggle" onclick="toggleFooterList('connect-list', this)">
 <h4>Connect with Us</h4>
 <i class="fas fa-chevron-down arrow-icon"></i>
 </div>
 <div id="connect-list" class="footer-list" style="display: none;">
 <p>Email: <a href="mailto:support@demo.com">support@demo.com</a></p>
 <p>Phone: +91-12345-67890</p>
 <div>
 <a href="https://wa.me/911234567890" target="_blank"><img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/whatsapp.svg" style="width: 30px; margin: 5px;"></a>
 <a href="https://instagram.com/yourpage" target="_blank"><img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/instagram.svg" style="width: 30px; margin: 5px;"></a>
 <a href="https://facebook.com/yourpage" target="_blank"><img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/facebook.svg" style="width: 30px; margin: 5px;"></a>
 </div>
 </div>
 </div>

 <p style="margin-top: 20px; text-align: center;">¬© 2025 <strong> NENI PATOLA CREATION </strong>All rights reserved.</p>
</div>
</footer>
<!-- Fullscreen Zoomable Gallery -->
<div id="zoom-gallery" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); z-index:9999; align-items:center; justify-content:center; flex-direction: column;">
  <button onclick="closeZoomGallery()" style="position:absolute; top:15px; right:25px; font-size:30px; background:none; color:white; border:none; cursor:pointer; z-index:9999;">&times;</button>
  <div style="flex-grow:1; display:flex; align-items:center; justify-content:center; width:100%; position:relative;">
    <button onclick="prevZoomSlide()" style="position:absolute; left:10px; font-size:40px; color:white; background:none; border:none; cursor:pointer; z-index:9999;">&#10094;</button>
    <img id="zoom-gallery-image" src="" style="max-width:95%; max-height:90%; object-fit:contain; transition: transform 0.3s ease;" />
    <button onclick="nextZoomSlide()" style="position:absolute; right:10px; font-size:40px; color:white; background:none; border:none; cursor:pointer; z-index:9999;">&#10095;</button>
  </div>
  <div id="zoom-gallery-dots" style="margin: 15px 0; text-align:center;"></div>
</div>
<div id="quick-view-popup">
  <button onclick="closeQuickView()" style="position:fixed; top:10px; right:15px; font-size:22px;z-index: 9999;">&times;</button>
  <div id="quick-view-content"></div>
</div>
<div id="scroll-loader" style="display: none; text-align: center; padding: 15px;">
  <img src="spinner.gif" alt="Loading..." style="width: 40px;" />
</div>

<script>
function scrollToTop() {
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

window.addEventListener('scroll', () => {
  const goTopBtn = document.getElementById('goTopBtn');
  if (window.scrollY > 200) {
    goTopBtn.style.display = 'block';
  } else {
    goTopBtn.style.display = 'none';
  }
});


let favorites = JSON.parse(localStorage.getItem('favorites') || '[]');

let zoomGalleryImages = [];
let zoomGalleryIndex = 0;

function openZoomGallery(images, startIndex = 0) {
  zoomGalleryImages = images;
  zoomGalleryIndex = startIndex;
  document.getElementById('zoom-gallery').style.display = 'flex';
  updateZoomGallery();
}

function updateZoomGallery() {
 
  const imgEl = document.getElementById('zoom-gallery-image');
  const dotsEl = document.getElementById('zoom-gallery-dots');
  // Reset zoom and drag state
scale = 1;
currentX = 0;
currentY = 0;
let startDistance = 0;
let lastX = 0, lastY = 0;
let isDragging = false;

imgEl.style.transform = 'scale(1) translate(0, 0)';
imgEl.src = zoomGalleryImages[zoomGalleryIndex];


  dotsEl.innerHTML = zoomGalleryImages.map((_, i) => `
    <span onclick="goToZoomSlide(${i})" class="${i === zoomGalleryIndex ? 'active' : ''}"></span>
  `).join('');



const zoomImg = document.getElementById('zoom-gallery-image');

// Handle pinch start
zoomImg.addEventListener('touchstart', function (e) {
  if (e.touches.length === 2) {
    startDistance = Math.hypot(
      e.touches[0].clientX - e.touches[1].clientX,
      e.touches[0].clientY - e.touches[1].clientY
    );
  } else if (e.touches.length === 1 && scale > 1) {
    isDragging = true;
    lastX = e.touches[0].clientX - currentX;
    lastY = e.touches[0].clientY - currentY;
  }
}, { passive: false });

// Handle move (zoom or drag)
zoomImg.addEventListener('touchmove', function (e) {
  if (e.touches.length === 2) {
    e.preventDefault();
    const newDistance = Math.hypot(
      e.touches[0].clientX - e.touches[1].clientX,
      e.touches[0].clientY - e.touches[1].clientY
    );
    const zoom = newDistance / startDistance;
    scale = Math.min(Math.max(1, zoom), 3);
    zoomImg.style.transform = `scale(${scale}) translate(${currentX}px, ${currentY}px)`;
  } else if (e.touches.length === 1 && isDragging && scale > 1) {
    e.preventDefault();
    currentX = e.touches[0].clientX - lastX;
    currentY = e.touches[0].clientY - lastY;
    zoomImg.style.transform = `scale(${scale}) translate(${currentX}px, ${currentY}px)`;
  }
}, { passive: false });

// Handle end
zoomImg.addEventListener('touchend', function (e) {
  if (e.touches.length < 2) {
    startDistance = 0;
  }
  if (e.touches.length === 0) {
    isDragging = false;
  }
});

// Reset on close
function closeZoomGallery() {
  document.getElementById('zoom-gallery').style.display = 'none';
  scale = 1;
  currentX = 0;
  currentY = 0;
  zoomImg.style.transform = 'scale(1) translate(0, 0)';
}


}

function closeZoomGallery() {
  document.getElementById('zoom-gallery').style.display = 'none';
}

function nextZoomSlide() {
  zoomGalleryIndex = (zoomGalleryIndex + 1) % zoomGalleryImages.length;
  updateZoomGallery();
}

function prevZoomSlide() {
  zoomGalleryIndex = (zoomGalleryIndex - 1 + zoomGalleryImages.length) % zoomGalleryImages.length;
  updateZoomGallery();
}

function goToZoomSlide(i) {
  zoomGalleryIndex = i;
  updateZoomGallery();
}


function updateBreadcrumb(type = null, product = null) {
  const breadcrumbEl = document.getElementById('breadcrumb');
  let html = `<a href="#" onclick="navigateHome()">Home</a>`;

  if (type) {
    html += ` > <a href="#" onclick="filterByFooter('${type}')">${capitalize(type)}</a>`;
  }

  if (product) {
    html += ` > <span>${product}</span>`;
  }

  breadcrumbEl.innerHTML = html;
breadcrumbEl.style.display = 'block';
}

function capitalize(str) {
  return str.charAt(0).toUpperCase() + str.slice(1);
}

function navigateHome() {
  showProductList(true);
  history.pushState({}, '', location.pathname);
}

function filterByFooter(type) {
  filterState.types = [type];
  filterState.sort = null;
  saveFilters();
  applyFiltersToUI();
  showProductList(true);
  updateBreadcrumb(type);
  history.pushState({}, '', location.pathname); // Reset URL
}


function toggleFooterList(id, toggleEl) {
const section = document.getElementById(id);
const wrapper = toggleEl.parentElement;
const arrow = toggleEl.querySelector('.arrow-icon');

const isOpen = section.style.display === 'block';
section.style.display = isOpen ? 'none' : 'block';

wrapper.classList.toggle('open', !isOpen);
}

function enableSwipe(galleryEl, productId) {
let touchStartX = 0;
let touchEndX = 0;

galleryEl.addEventListener('touchstart', e => {
 touchStartX = e.changedTouches[0].screenX;
});

galleryEl.addEventListener('touchend', e => {
 touchEndX = e.changedTouches[0].screenX;
 handleSwipe(productId);
});

function handleSwipe(productId) {
 const diff = touchStartX - touchEndX;
 if (Math.abs(diff) > 50) {
 if (diff > 0) {
 nextImage(productId); // swipe left
 } else {
 prevImage(productId); // swipe right
 }
 }
}
}

const products = [
{ id: 1, name: 'Single Ikat Patola Saree', price: 24000.00, description: '<b>Design : </b>Its in traditional Patola Motifs<br /><br /><b>Saree: </b>Single Ikat Patola Saree<br /><br /><b>Manufacturing time taken For this Saree : </b>40 Days ( Saree is ready available for shipping )<br /><br /><b>Blouse : </b>Check Pictures Carousal for Blouse picture<br /><br /><b>Base Color : </b>Green<br /><br /><b>Border Pallu : </b>Red<br /><br /><b>Material : </b>Pure Silk<br /><br /><b>Weave : </b>Pure Hand Tie & Dye Handloom Weave<br /><br /><b>Note** : </b>Color Variations possible depending on lights & devices used during photography & also device used to watch picture<br /><br />', image: 'f1.jpeg',gallery: ['f1.jpeg','f2.jpeg','f3.jpeg'], type: 'Saree' },
{ id: 2, name: 'Banarasi Paithani Jaal Weave Bandhani Saree', price: 38800, description: '<b>Design : </b>Its in traditional Banarasi Paithani Jaal Weave Bandhani Saree<br /><br /><b>brSaree: </b>Banarasi Paithani Jaal Weave Bandhani Saree ( Saree is ready available for shipping )<br /><br /><b>Blouse : </b>Check Pictures Carousal for Blouse picture<br /><br /><b>Base Color : </b>Magenta<br /><br /><b>Border Pallu : </b>Magenta<br /><br /><b>Material : </b>Pure Banarasi Georgette<br /><br /><b>Bandhej : </b>Pure Hand Tie & Dye<br /><br /><b>Note** : </b>Color Variations possible depending on lights & devices used during photography & also device used to watch picture', image: 'b1.jpg',gallery: ['b1.jpg','b2.jpg','b3.jpg'], type: 'Saree' },
{ id: 3, name: 'Orange', price: 110, description: 'Juicy orange fruit', image: 'https://upload.wikimedia.org/wikipedia/commons/c/c4/Orange-Fruit-Pieces.jpg', type: 'Saree' },
{ id: 4, name: 'Grapes', price: 140, description: 'Green seedless grapes', image: 'https://upload.wikimedia.org/wikipedia/commons/3/36/Kyoho-grape.jpg', type: 'fruit' },
{ id: 5, name: 'Mango', price: 180, description: 'Sweet Alphonso mango', image: 'https://upload.wikimedia.org/wikipedia/commons/9/90/Hapus_Mango.jpg', type: 'fruit' },
{ id: 6, name: 'Tomato', price: 40, description: 'Fresh red tomatoes', image: 'https://upload.wikimedia.org/wikipedia/commons/8/88/Bright_red_tomato_and_cross_section02.jpg', type: 'vegetable' },
{ id: 7, name: 'Potato', price: 30, description: 'Clean brown potatoes', image: 'https://img.freepik.com/free-photo/potato-vegetables-isolated_1203-6930.jpg', type: 'vegetable' },
{ id: 8, name: 'Cabbage', price: 45, description: 'Green cabbage head', image: 'https://img.freepik.com/premium-photo/savoy-cabbage-isolated-white-background_980000-444.jpg', type: 'vegetable' }
];

let cart = [];

let currentGalleryIndex = {};

function showImage(productId, index) {
const gallery = document.getElementById(`gallery-${productId}`);
const total = gallery.children.length;

if (index < 0) index = total - 1;
if (index >= total) index = 0;

currentGalleryIndex[productId] = index;
gallery.style.transform = `translateX(-${index * 100}%)`;

const dots = document.querySelectorAll(`#gallery-dots-${productId} span`);
if (dots.length) {
 dots.forEach((dot, i) => {
 dot.classList.toggle('active', i === index);
 });
}
}

function nextImage(productId) {
showImage(productId, (currentGalleryIndex[productId] ?? 0) + 1);
}

function prevImage(productId) {
showImage(productId, (currentGalleryIndex[productId] ?? 0) - 1);
}

let filterState = {
sort: null,
types: []
};

function toggleFilterPopup() {
const popup = document.getElementById('filter-popup');
popup.style.display = popup.style.display === 'none' ? 'block' : 'none';
}

function applyFilter() {
const sortValue = document.querySelector('input[name="sort"]:checked');
const selectedTypes = Array.from(document.querySelectorAll('.type-filter:checked')).map(cb => cb.value);

filterState.sort = sortValue ? sortValue.value : null;
filterState.types = selectedTypes;

toggleFilterPopup();
showProductList(true);
}


let visibleCount = { fruit: 0, vegetable: 0 };
const pageSize = 3;

const cartCountEl = document.getElementById('cart-count');
const fruitListEl = document.getElementById('fruit-list');
const vegetableListEl = document.getElementById('vegetable-list');
const productListEl = document.getElementById('product-list');
const productDetailEl = document.getElementById('product-detail');
const cartViewEl = document.getElementById('cart-view');
const searchInput = document.getElementById('searchInput');
const priceFilter = document.getElementById('priceFilter');

function toggleMenu() {
const menu = document.getElementById('menu');
menu.style.display = (menu.style.display === 'block') ? 'none' : 'block';
}

function closeMenu() {
document.getElementById('menu').style.display = 'none';
}


function saveCart() {
localStorage.setItem('cart', JSON.stringify(cart));
}
function loadCart() {
const saved = localStorage.getItem('cart');
cart = saved ? JSON.parse(saved) : [];
updateCartCount();

}
function updateCartCount() {
cartCountEl.textContent = `Cart (${cart.length})`;
}

function showProductList(reset = true) {
  document.getElementById('breadcrumb').innerHTML = '';
 document.getElementById('main-controls').style.display = 'block';
history.replaceState({}, '', location.pathname);
productDetailEl.style.display = 'none';
cartViewEl.style.display = 'none';
productListEl.style.display = 'block';

const allProductsEl = document.getElementById('all-products');
if (reset) {
 visibleCount = { all: 0 };
 allProductsEl.innerHTML = '';
}

loadMore(reset);
}

let isLoading = false;

function loadMore(reset = false) {
  if (isLoading) return;
isLoading = true;

const btnEl = document.getElementById('load-more-all');
btnEl.classList.add('spinner-btn');
btnEl.disabled = true;

const search = searchInput.value.toLowerCase();
let filtered = products.filter(p =>
p.name.toLowerCase().startsWith(search) &&
(filterState.types.length === 0 || filterState.types.includes(p.type))
);

if (filterState.sort === 'low') {
filtered.sort((a, b) => a.price - b.price);
} else if (filterState.sort === 'high') {
filtered.sort((a, b) => b.price - a.price);
}


if (!visibleCount.all) visibleCount.all = 0;

const start = visibleCount.all;
const itemsToShow = filtered.slice(start, start + pageSize);
const listEl = document.getElementById('all-products');

itemsToShow.forEach(p => {
 const div = document.createElement('div');
 div.className = 'product';
 div.innerHTML = `
  <div onclick="showLoading(1500, () => showProductDetail(${p.id}))" style="cursor: pointer;">
    <img src="${p.image}" alt="${p.name}" />
    <h3>${p.name}</h3>
    <p>‚Çπ${p.price}</p>
  </div>
  <div style="display: flex; justify-content: center; gap: 10px; margin-top: 6px;">${cart.includes(p.id)   ? `<button class="icon-btn" disabled><i class='fas fa-cart-plus'; style='color:blue;'></i></button>` : `<button class="icon-btn" onclick="event.stopPropagation(); addToCart(${p.id}); this.innerHTML = '<i class=&quot;fas fa-cart-plus&quot; style=&quot;color:blue;&quot;></i>'; this.disabled=true;"><i class="fas fa-cart-plus"></i></button>`}
<button class="icon-btn" onclick="event.stopPropagation(); toggleLike(${p.id}, this)">${favorites.includes(p.id) ? '<i class="fas fa-heart" style="color: red;"></i>' : '<i class="far fa-heart"></i>Ô∏è'}</button>
    <button class="icon-btn" onclick="event.stopPropagation(); openQuickView(${p.id})"><i class="fas fa-eye"></i>Ô∏è</button>
  </div>
`;
 div.onclick = () => {
showLoading(1500, () => {
 showProductDetail(p.id);
 history.pushState({ id: p.id }, '', `?product=${p.id}`);
});
};

 listEl.appendChild(div);
});

visibleCount.all += itemsToShow.length;
btnEl.style.display = (visibleCount.all >= filtered.length) ? 'none' : 'inline-block';

if (filtered.length === 0 && reset) {
 listEl.innerHTML = '<p>No products found.</p>';
}
btnEl.classList.remove('spinner-btn');
btnEl.disabled = false;
isLoading = false;

}


function showProductDetail(id) {
  window.scrollTo(0, 0);
 document.getElementById('main-controls').style.display = 'none';
const p = products.find(x => x.id === id);
if (!p) return;

const shareUrl = `${location.origin}${location.pathname}?product=${id}`;
const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(`${p.name} - ‚Çπ${p.price}\n${p.description}\n${shareUrl}`)}`;

const isInCart = cart.includes(p.id);
const addButton = isInCart
 ? `<button style="background: #2ecc71;">‚úÖ Already in Cart</button>`
 : `<button onclick="addToCart(${p.id})">üõí Add to Cart</button>`;

productListEl.style.display = 'none';
cartViewEl.style.display = 'none';
productDetailEl.style.display = 'block';

const galleryImages = p.gallery && p.gallery.length > 1 ? p.gallery : [p.image];
const hasMultipleImages = galleryImages.length > 1;
updateBreadcrumb(p.type, p.name);
productDetailEl.innerHTML = `
<div class="product-detail">
<div class="image-gallery-wrapper">
  <div class="image-gallery">
    <div class="image-gallery-inner" id="gallery-${p.id}">
      ${galleryImages.map((src, i) => `
       <div style="position: relative; width: 100%;">
          <img src="${src}" alt="${p.name}" onclick='openZoomGallery(${JSON.stringify(galleryImages)}, ${i})' />
          <div id="overlay-container" onclick='openZoomGallery(${JSON.stringify(galleryImages)}, ${i})'><img src="sp.png" alt="stamp" class="overlay-stamp" />
        </div></div>
      `).join('')}
    </div>
    ${hasMultipleImages ? `
      <button class="gallery-arrow arrow-left" onclick="prevImage(${p.id})">&#10094;</button>
      <button class="gallery-arrow arrow-right" onclick="nextImage(${p.id})">&#10095;</button>
    ` : ''}
  </div>
  ${hasMultipleImages ? `
    <div class="gallery-dots" id="gallery-dots-${p.id}">
      ${galleryImages.map((_, i) => `
        <span onclick="showImage(${p.id}, ${i})" class="${i === 0 ? 'active' : ''}"></span>
      `).join('')}
    </div>
  ` : ''}
</div>

<br /><h3>${p.name}</h3><br />
 <p class="pr">Price: ‚Çπ${p.price}</p><br />
 <p>${p.description}</p>
 
 <div>
 <label for="qty" style="font-weight:bold;">Quantity:</label>
 <input type="number" id="qty" min="1" value="1" style="width: 60px; padding: 6px; margin: 0 10px; border-radius: 5px; border: 1px solid #ccc;" onchange="updateTotalPrice(${p.price})"/>
 <span id="total-price" style="font-weight:bold;">Total: ‚Çπ${p.price}</span>
 </div>

 <div class="buttons">
 ${cart.includes(p.id)  ? `<button id="add-btn-${p.id}" style="background: #2ecc71;">‚úÖ Already in Cart</button>`  : `<button id="add-btn-${p.id}" onclick="addToCart(${p.id})">üõí Add to Cart</button>`}
 <button onclick="copyLink(${p.id})">üîó Copy Link</button>
 <a href="#" onclick="shareOnWhatsApp(${p.id})"><button>üõçÔ∏è WhatsApp</button></a>
 <button onclick="goBack()">Back</button>
 </div>
<div id="suggested-products" style="margin-top: 30px;"></div>
</div>
`;
if (hasMultipleImages) {
currentGalleryIndex[p.id] = 0;
enableSwipe(document.querySelector(`#gallery-${p.id}`), p.id);
}

// Show suggested products
const suggested = products.filter(prod => prod.type === p.type && prod.id !== p.id).slice(0, 6); // Up to 6 suggestions
let html = '';

if (suggested.length) {
  html += `<h3 style="margin-top: 30px;">You Might Also Like</h3>`;
  html += `
    <div style="
      display: flex;
      overflow-x: auto;
      gap: 15px;
      padding-bottom: 10px;
      margin-top: 10px;
    ">
  `;

  suggested.forEach(sp => {
    html += `
  <div style="flex: 0 0 auto; width: 160px; border: 1px solid #ccc; padding: 10px; border-radius: 8px; background: white;">
    <div onclick="showLoading(1500, () => {
  history.pushState({ id: ${sp.id} }, '', '?product=${sp.id}');showProductDetail(${sp.id});})" style="cursor: pointer;">
      <img src="${sp.image}" alt="${sp.name}" style="width: 100%; border-radius: 6px;" />
      <h4 style="font-size: 16px; margin: 8px 0;">${sp.name}</h4>
      <p style="color: #333;">‚Çπ${sp.price}</p>
    </div>
    <div class="icon-bar" style="display: flex; gap: 10px; justify-content: center; margin-top: 8px;">
${cart.includes(sp.id) ? `<button class="icon-btn" disabled><i class='fas fa-cart-plus' style='color:blue;'></i></button>` : `<button class="icon-btn" onclick="event.stopPropagation(); addToCart(${sp.id}); this.innerHTML = '<i class=&quot;fas fa-cart-plus&quot; style=&quot;color:blue;&quot;></i>'; this.disabled=true;"><i class="fas fa-cart-plus"></i></button>`}
<button class="icon-btn" onclick="event.stopPropagation(); toggleLike(${sp.id}, this)">${favorites.includes(sp.id) ? '<i class="fas fa-heart" style="color: red;"></i>' : '<i class="far fa-heart"></i>Ô∏è'}</button>
      <button class="icon-btn" onclick="event.stopPropagation(); openQuickView(${sp.id})"><i class="fas fa-eye"></i>Ô∏è</button>
    </div>
  </div>
`;
  });

  html += `</div>`;
}

document.getElementById('suggested-products').innerHTML = html;
}

function updateTotalPrice(unitPrice) {
const qty = parseInt(document.getElementById('qty').value) || 1;
const total = unitPrice * qty;
document.getElementById('total-price').textContent = `Total: ‚Çπ${total}`;
}

function shareOnWhatsApp(id) {
const p = products.find(x => x.id === id);
if (!p) return;
const qty = parseInt(document.getElementById('qty').value) || 1;
const total = qty * p.price;
const shareUrl = `${location.origin}${location.pathname}?product=${id}`;
const text = `${p.name}\nQty: ${qty}\nPrice per item: ‚Çπ${p.price}\nTotal: ‚Çπ${total}\n${p.description}\n${shareUrl}`;
const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(text)}`;
window.open(whatsappUrl, '_blank');
}


function addToCart(id) {
  if (!cart.includes(id)) {
    cart.push(id);
    saveCart();
    updateCartCount();
  }

  // Live update the Add to Cart button in Product Detail view
  const btn = document.getElementById(`add-btn-${id}`);
  if (btn) {
    btn.innerText = "‚úÖ Added";
    btn.style.background = "#2ecc71";
    btn.disabled = true;
    btn.onclick = null;
  }
}

function removeFromCart(index) {
if (index >= 0 && index < cart.length) {
 const confirmed = confirm("Are you sure you want to remove this item from the cart?");
 if (confirmed) {
 cart.splice(index, 1);
 saveCart();
 updateCartCount();
 showCart();
 }
}
}

function copyLink(id) {
const url = `${location.origin}${location.pathname}?product=${id}`;
navigator.clipboard.writeText(url).then(() => alert("Link copied!"));
}
function goBack() {
history.back();
}
function getQueryParam(key) {
const urlParams = new URLSearchParams(window.location.search);
return urlParams.get(key);
}

window.onpopstate = function () {
  const productId = getQueryParam('product');
  const isCart = getQueryParam('cart');

  if (productId) {
    const p = products.find(prod => prod.id === parseInt(productId));
    showProductDetail(parseInt(productId));
    if (p) updateBreadcrumb(p.type, p.name);
  } else if (isCart !== null) {
    showCart();
    document.getElementById('breadcrumb').innerHTML = '';
}else if (isFavorites !== null) {
  showFavorites();
  } else {
    showProductList(true);
    document.getElementById('breadcrumb').innerHTML = '';
  }
};


searchInput.addEventListener('input', () => showProductList(true));

loadCart();
const initialProduct = getQueryParam('product');
if (initialProduct) {
showProductDetail(parseInt(initialProduct));
} else {
showProductList(true);
}

function showCart() {
  document.getElementById('breadcrumb').innerHTML = '';
 document.getElementById('main-controls').style.display = 'none';

if (location.search !== '?cart=true') {
history.pushState({ view: 'cart' }, '', '?cart=true');
}
productListEl.style.display = 'none';
productDetailEl.style.display = 'none';
cartViewEl.style.display = 'block';

if (cart.length === 0) {
 cartViewEl.innerHTML = '<p>Your cart is empty.</p>';
 return;
}

let total = 0;
cartViewEl.innerHTML = '<h3>Your Cart:</h3>';

cart.forEach((id, index) => {
 const p = products.find(prod => prod.id === id);
 if (p) {
 total += p.price;
 cartViewEl.innerHTML += `
 <div class="cart-item" style="display: flex; align-items: center; gap: 15px; margin-bottom: 10px; background: white; border-radius: 10px; padding: 10px;">
 <div onclick="showProductDetail(${p.id}); history.pushState({ id: ${p.id} }, '', '?product=${p.id}')" style="display: flex; align-items: center; gap: 10px; flex-grow: 1; cursor: pointer;">
 <img src="${p.image}" alt="${p.name}" style="width: 60px; height: 60px; border-radius: 8px; object-fit: cover;">
 <div>
 <strong>${p.name}</strong><br>
 <span>‚Çπ${p.price}</span>
 </div>
 </div>
 <button class="remove-btn" onclick="removeFromCart(${index})">Remove</button>
 </div>
 `;
 }
});

cartViewEl.innerHTML += `<div class="total-price">Total: ‚Çπ${total}</div>`;
cartViewEl.innerHTML += `<button id="ctn" onclick="showProductList(true)">‚¨Ö Continue Shopping</button>`;
}

// Close menu if user clicks outside
document.addEventListener('click', function(event) {
const menu = document.getElementById('menu');
const menuBtn = document.querySelector('.menu-btn');
if (!menu.contains(event.target) && !menuBtn.contains(event.target)) {
 menu.style.display = 'none';
}
});
function saveFilters() {
sessionStorage.setItem('filters', JSON.stringify(filterState));
}

function loadFilters() {
const saved = sessionStorage.getItem('filters');
if (saved) {
 filterState = JSON.parse(saved);
 applyFiltersToUI();
}
}

window.addEventListener('scroll', () => {
  const scrollTop = window.scrollY || document.documentElement.scrollTop;
  const scrollHeight = document.documentElement.scrollHeight;
  const clientHeight = document.documentElement.clientHeight;

  // If the user scrolled to within 100px of the bottom, load more
  if (scrollTop + clientHeight >= scrollHeight - 100) {
    loadMore(false);
  }
});


function applyFiltersToUI() {
if (filterState.sort) {
 const sortRadio = document.querySelector(`input[name="sort"][value="${filterState.sort}"]`);
 if (sortRadio) sortRadio.checked = true;
}

document.querySelectorAll('.type-filter').forEach(cb => {
 cb.checked = filterState.types.includes(cb.value);
});
}

function applyFilter() {
const sortValue = document.querySelector('input[name="sort"]:checked');
const selectedTypes = Array.from(document.querySelectorAll('.type-filter:checked')).map(cb => cb.value);

filterState.sort = sortValue ? sortValue.value : null;
filterState.types = selectedTypes;

saveFilters(); // üëà Save to sessionStorage
toggleFilterPopup();
showProductList(true);
}


loadCart();
loadFilters(); 

window.addEventListener('load', () => {
const minLoadingTime = 1500; // 2 seconds
const loadingStart = performance.timing.navigationStart;
const now = performance.now();
const elapsed = now;

const remainingTime = Math.max(0, minLoadingTime - elapsed);

setTimeout(() => {
 document.getElementById('loading-screen').style.display = 'none';
}, remainingTime);
});

function showLoading(minDuration = 1500, callback = null) {
const loader = document.getElementById('loading-screen');
loader.style.display = 'flex';

setTimeout(() => {
 loader.style.display = 'none';
 if (callback) callback();
}, minDuration);
}

function openQuickView(id) {
  const p = products.find(prod => prod.id === id);
  if (!p) return;

const qtyId = `quick-qty-${id}`;
  const totalId = `quick-total-${id}`;
  
history.pushState({ id }, '', `?product=${id}`);
  document.getElementById('quick-view-content').innerHTML = `
    <img src="${p.image}" alt="${p.name}" />
    <h3>${p.name}</h3>
    <p><b>Price:</b> ‚Çπ${p.price}</p><br />
    <p onclick="showLoading(1500, () => showProductDetail(${p.id}),closeQuickView())"><u style="color: blue; cursor: pointer;">View details</u></p><br />
    <label><b>Quantity:</b></label>
    <input type="number" id="${qtyId}" value="1" min="1" style="width:60px;" onchange="updateQuickTotal(${id}, ${p.price})"/>
    <p id="${totalId}">Total: ‚Çπ${p.price}</p>
    <div style="margin-top: 10px;">
      <button onclick="addToCart(${p.id})">üõí Add to Cart</button>
      <button onclick="copyLink(${p.id})">üîó Copy Link</button>
      <button onclick="shareOnWhatsApp(${p.id}, '${qtyId}')">üõçÔ∏è WhatsApp</button>
    </div>
  `;
  document.getElementById('quick-view-popup').style.display = 'block';
}

function updateQuickTotal(id, price) {
  const qty = parseInt(document.getElementById(`quick-qty-${id}`).value) || 1;
  document.getElementById(`quick-total-${id}`).textContent = `Total: ‚Çπ${price * qty}`;
}

function closeQuickView() {
  document.getElementById('quick-view-popup').style.display = 'none';
}

function toggleLike(id, el) {
  const index = favorites.indexOf(id);
  if (index !== -1) {
    favorites.splice(index, 1);
    el.innerHTML = `<i class='far fa-heart'>Ô∏è`; // Unliked
  } else {
    favorites.push(id);
    el.innerHTML = `<i class='fas fa-heart' style='color: red;'>Ô∏è`; // Liked
  }
  localStorage.setItem('favorites', JSON.stringify(favorites));
}


function shareOnWhatsApp(id, qtyInputId = 'qty') {
  const p = products.find(prod => prod.id === id);
  if (!p) return;

  const qty = parseInt(document.getElementById(qtyInputId)?.value) || 1;
  const total = qty * p.price;
  const shareUrl = `${location.origin}${location.pathname}?product=${id}`;
  const text = `${p.name}\nQty: ${qty}\nPrice: ‚Çπ${p.price}\nTotal: ‚Çπ${total}\n${p.description}\n${shareUrl}`;
  window.open(`https://wa.me/?text=${encodeURIComponent(text)}`, '_blank');
}

function showFavorites() {
  history.pushState({ view: 'favorites' }, '', '?favorites=true'); 

  const loadMoreBtn = document.getElementById('load-more-all');
loadMoreBtn.style.display = 'none';
loadMoreBtn.disabled = true;

  document.getElementById('main-controls').style.display = 'none';
  productListEl.style.display = 'block';
  productDetailEl.style.display = 'none';
  cartViewEl.style.display = 'none';
  document.getElementById('breadcrumb').innerHTML = 'Favorites';

  const allProductsEl = document.getElementById('all-products');
  allProductsEl.innerHTML = '';

  const favProducts = products.filter(p => favorites.includes(p.id));

  if (favProducts.length === 0) {
    allProductsEl.innerHTML = '<p>No favorites yet.</p>';
    return;
  }

  favProducts.forEach(p => {
    const div = document.createElement('div');
    div.className = 'product';
    div.innerHTML = `
      <div onclick="showLoading(1500, () => showProductDetail(${p.id}))" style="cursor:pointer;">
        <img src="${p.image}" alt="${p.name}" />
        <h3>${p.name}</h3>
        <p>‚Çπ${p.price}</p>
      </div>
      <div style="display:flex; justify-content:center; gap:10px; margin-top:6px;">
${cart.includes(p.id) ? `<button class="icon-btn" disabled><i class='fas fa-cart-plus' style='color:blue;'></i></button>` : `<button class="icon-btn" onclick="event.stopPropagation(); addToCart(${p.id}); this.innerHTML = '<i class=&quot;fas fa-cart-plus&quot; style=&quot;color:blue;&quot;></i>'; this.disabled=true;"><i class="fas fa-cart-plus"></i></button>`}
<button class="icon-btn" onclick="event.stopPropagation(); toggleLike(${p.id}, this)">${favorites.includes(p.id) ? `<i class='fas fa-heart' style='color: red;'></i>` : `<i class='far fa-heart'></i>`}</button>
        <button class="icon-btn" onclick="event.stopPropagation(); openQuickView(${p.id})"><i class="fas fa-eye"></i>Ô∏è</button>
      </div>
    `;
    allProductsEl.appendChild(div);
  });

  document.getElementById('load-more-all').style.display = 'none';
}

</script>
</body>
</html>
